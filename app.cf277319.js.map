{"version":3,"sources":["static/js/views/abstract-view.js","static/js/views/main-page.js","static/js/views/home.js","static/js/views/library.js","static/js/app.js"],"names":["constructor","params","setTitle","title","document","getHtml","AbstractView","pathToRegex","path","RegExp","replace","getParams","match","values","result","slice","keys","Array","from","route","matchAll","map","Object","fromEntries","key","i","navigateTo","url","history","pushState","router","routes","view","MainPage","Home","Library","location","pathname","find","potentialMatch","querySelector","innerHTML","window","addEventListener","body","e","target","matches","preventDefault","href"],"mappings":";AAAqB,aAAA,OAAA,eAAA,QAAA,aAAA,CAAA,OAAA,IAAA,QAAA,aAAA,EAAN,MAAM,EACjBA,YAAYC,GACHA,KAAAA,OAASA,EAGlBC,SAASC,GACLC,SAASD,MAAQA,EAGfE,gBACK,MAAA,IAVM,QAAA,QAAA;;ACEqB,aAAA,OAAA,eAAA,QAAA,aAAA,CAAA,OAAA,IAAA,QAAA,aAAA,EAF1C,IAAA,EAAA,EAAA,QAAA,uBAE0C,SAAA,EAAA,GAAA,OAAA,GAAA,EAAA,WAAA,EAAA,CAAA,QAAA,GAA3B,MAAcC,UAAAA,EAAd,QACXN,YAAYC,GACFA,MAAAA,GACDC,KAAAA,SAAS,QAGZG,gBACM,MAAA,yLAP0B,QAAA,QAAA;;ACAA,aAAA,OAAA,eAAA,QAAA,aAAA,CAAA,OAAA,IAAA,QAAA,aAAA,EAF1C,IAAA,EAAA,EAAA,QAAA,uBAE0C,SAAA,EAAA,GAAA,OAAA,GAAA,EAAA,WAAA,EAAA,CAAA,QAAA,GAA3B,MAAcC,UAAAA,EAAd,QACXN,YAAYC,GACFA,MAAAA,GACDC,KAAAA,SAAS,aAGZG,gBACM,MAAA,8LAP0B,QAAA,QAAA;;ACAA,aAAA,OAAA,eAAA,QAAA,aAAA,CAAA,OAAA,IAAA,QAAA,aAAA,EAF1C,IAAA,EAAA,EAAA,QAAA,uBAE0C,SAAA,EAAA,GAAA,OAAA,GAAA,EAAA,WAAA,EAAA,CAAA,QAAA,GAA3B,MAAcC,UAAAA,EAAd,QACXN,YAAYC,GACFA,MAAAA,GACDC,KAAAA,SAAS,WAGZG,gBACM,MAAA,+LAP0B,QAAA,QAAA;;ACiD1C,aAnDA,IAAA,EAAA,EAAA,QAAA,yBACA,EAAA,EAAA,QAAA,oBACA,EAAA,EAAA,QAAA,uBAiDA,SAAA,EAAA,GAAA,OAAA,GAAA,EAAA,WAAA,EAAA,CAAA,QAAA,GA/CA,MAAME,EAAcC,GAAQ,IAAIC,OAAO,IAAMD,EAAKE,QAAQ,MAAO,OAAOA,QAAQ,QAAS,QAAU,KAE7FC,EAAYC,IACRC,MAAAA,EAASD,EAAME,OAAOC,MAAM,GAC5BC,EAAOC,MAAMC,KAAKN,EAAMO,MAAMX,KAAKY,SAAS,YAAYC,IAAIP,GAAUA,EAAO,IAE5EQ,OAAAA,OAAOC,YAAYP,EAAKK,IAAI,CAACG,EAAKC,IAC9B,CAACD,EAAKX,EAAOY,OAItBC,EAAaC,IACfC,QAAQC,UAAU,KAAM,KAAMF,GAC9BG,KAGEA,EAAS,UACLC,MAAAA,EAAS,CACX,CAAEvB,KAAM,IAAKwB,KAAKC,EAAAA,SAClB,CAAEzB,KAAM,QAASwB,KAAME,EAAAA,SACvB,CAAE1B,KAAM,WAAYwB,KAAMG,EAAAA,UAW1BvB,IAAAA,EAPqBmB,EAAOV,IAAIF,IACzB,CACHA,MAAOA,EACPL,OAAQsB,SAASC,SAASzB,MAAML,EAAYY,EAAMX,UAI7B8B,KAAKC,GAA4C,OAA1BA,EAAezB,QAE9DF,IACDA,EAAQ,CACJO,MAAOY,EAAO,GACdjB,OAAQ,CAACsB,SAASC,YAIpBL,MAAAA,EAAO,IAAIpB,EAAMO,MAAMa,KAAKrB,EAAUC,IAE5CR,SAASoC,cAAc,QAAQC,gBAAkBT,EAAK3B,WAG1DqC,OAAOC,iBAAiB,WAAYb,GAEpC1B,SAASuC,iBAAiB,mBAAoB,KAC1CvC,SAASwC,KAAKD,iBAAiB,QAASE,IAChCA,EAAEC,OAAOC,QAAQ,iBACjBF,EAAEG,iBACFtB,EAAWmB,EAAEC,OAAOG,SAI5BnB","file":"app.cf277319.js","sourceRoot":"../src","sourcesContent":["export default class {\n    constructor(params) {\n        this.params = params;\n    }\n\n    setTitle(title) {\n        document.title = title;\n    }\n\n    async getHtml() {\n        return \"\";\n    }\n}","import AbstractView from \"./abstract-view.js\";\n\nexport default class extends AbstractView {\n    constructor(params) {\n        super(params);\n        this.setTitle(\"Page\");\n    }\n\n    async getHtml() {\n        return `\n            <section class=\"container\">\n            <h1>Page</h1>\n            <p>\n                Урааааааааа!\n            </p>\n            \n            </section>\n        `;\n    }\n}","import AbstractView from \"./abstract-view.js\";\n\nexport default class extends AbstractView {\n    constructor(params) {\n        super(params);\n        this.setTitle(\"Home-page\");\n    }\n\n    async getHtml() {\n        return `\n            <section class=\"container\">\n            <h1>Home-page</h1>\n            <p>\n                Урааааааааа!\n            </p>\n            \n            </section>\n        `;\n    }\n}","import AbstractView from \"./abstract-view.js\";\n\nexport default class extends AbstractView {\n    constructor(params) {\n        super(params);\n        this.setTitle(\"LIBRARY\");\n    }\n\n    async getHtml() {\n        return `\n            <section class=\"container\">\n            <h1>MY-LIBRARY</h1>\n            <p>\n                Урааааааааа!\n            </p>\n            \n            </section>\n        `;\n    }\n}","import MainPage from \"./views/main-page.js\";\nimport Home from \"./views/home.js\";\nimport Library from \"./views/library.js\";\n\nconst pathToRegex = path => new RegExp(\"^\" + path.replace(/\\//g, \"\\\\/\").replace(/:\\w+/g, \"(.+)\") + \"$\");\n\nconst getParams = match => {\n    const values = match.result.slice(1);\n    const keys = Array.from(match.route.path.matchAll(/:(\\w+)/g)).map(result => result[1]);\n\n    return Object.fromEntries(keys.map((key, i) => {\n        return [key, values[i]];\n    }));\n};\n\nconst navigateTo = url => {\n    history.pushState(null, null, url);\n    router();\n};\n\nconst router = async () => {\n    const routes = [\n        { path: \"/\", view:MainPage},\n        { path: \"/home\", view: Home },\n        { path: \"/library\", view: Library },\n    ];\n\n    // Test each route for potential match\n    const potentialMatches = routes.map(route => {\n        return {\n            route: route,\n            result: location.pathname.match(pathToRegex(route.path))\n        };\n    });\n\n    let match = potentialMatches.find(potentialMatch => potentialMatch.result !== null);\n\n    if (!match) {\n        match = {\n            route: routes[0],\n            result: [location.pathname]\n        };\n    }\n\n    const view = new match.route.view(getParams(match));\n\n    document.querySelector(\"#app\").innerHTML = await view.getHtml();\n};\n\nwindow.addEventListener(\"popstate\", router);\n\ndocument.addEventListener(\"DOMContentLoaded\", () => {\n    document.body.addEventListener(\"click\", e => {\n        if (e.target.matches(\"[data-link]\")) {\n            e.preventDefault();\n            navigateTo(e.target.href);\n        }\n    });\n\n    router();\n});"]}